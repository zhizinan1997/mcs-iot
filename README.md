# MCS-IoT å·¥ä¸šçº§æ°”ä½“ç›‘æµ‹ç‰©è”ç½‘å¹³å°

ä¸“ä¸ºå·¥ä¸šæ°”ä½“ç›‘æµ‹åœºæ™¯è®¾è®¡çš„ç‰©è”ç½‘äº‘å¹³å°ï¼Œæ”¯æŒå®æ—¶æ•°æ®é‡‡é›†ã€å¯è§†åŒ–å¤§å±ã€æ™ºèƒ½æŠ¥è­¦å’Œè®¾å¤‡ç®¡ç†ã€‚

---

## ğŸš€ ä¸€é”®éƒ¨ç½²

æ”¯æŒ Ubuntu 20.04+ã€CentOS 7+ã€OpenCloudOSã€Debian 10+

```bash
curl -sSL https://raw.githubusercontent.com/zhizinan1997/mcs-iot/main/scripts/deploy.sh -o deploy.sh
chmod +x deploy.sh
sudo ./deploy.sh
```

**è„šæœ¬å°†è‡ªåŠ¨å®Œæˆï¼š**

- âœ… ç¯å¢ƒæ£€æµ‹ä¸ä¾èµ–å®‰è£… (Docker, Certbot)
- âœ… åŸŸåé…ç½®ä¸ SSL è¯ä¹¦ç”³è¯· (Let's Encrypt)
- âœ… æ•°æ®åº“å¯†ç ä¸ API å¯†é’¥é…ç½®
- âœ… Docker å®¹å™¨éƒ¨ç½²
- âœ… å¯é€‰å¯¼å…¥æ¼”ç¤ºæ•°æ®

---

## ğŸ“‹ åŸŸåé…ç½®

éƒ¨ç½²å‰è¯·å‡†å¤‡ 4 ä¸ªåŸŸåå¹¶è§£æåˆ°æœåŠ¡å™¨ IPï¼š

| åŸŸå      | ç”¨é€”       | ç¤ºä¾‹                 |
| --------- | ---------- | -------------------- |
| ä¸»åŸŸå    | ç®¡ç†åå°   | `iot.example.com`    |
| API åŸŸå  | æ¥å£æœåŠ¡   | `api.example.com`    |
| MQTT åŸŸå | è®¾å¤‡è¿æ¥   | `mqtt.example.com`   |
| å¤§å±åŸŸå  | å¯è§†åŒ–å±•ç¤º | `screen.example.com` |

---

## ğŸ› ï¸ éƒ¨ç½²åç®¡ç†

```bash
# æœåŠ¡ç®¡ç†
mcs-iot start      # å¯åŠ¨æœåŠ¡
mcs-iot stop       # åœæ­¢æœåŠ¡
mcs-iot restart    # é‡å¯æœåŠ¡
mcs-iot status     # æŸ¥çœ‹çŠ¶æ€
mcs-iot logs       # æŸ¥çœ‹æ—¥å¿—

# æ¨¡æ‹Ÿå™¨
mcs-simulator-start    # å¯åŠ¨ 24 ä¸ªæ¨¡æ‹Ÿä¼ æ„Ÿå™¨
mcs-simulator-stop     # åœæ­¢æ¨¡æ‹Ÿå™¨
```

---

## ğŸ“¡ è®¾å¤‡æ¥å…¥

### MQTT å‚æ•°

| å‚æ•°   | å€¼                    |
| ------ | --------------------- |
| Broker | `mqtt.yourdomain.com` |
| ç«¯å£   | 8883 (TLS)            |
| ç”¨æˆ·å | ç®¡ç†åå°é…ç½®          |

### ä¸Šè¡Œæ•°æ® (Topic: `mcs/{è®¾å¤‡SN}/up`)

```json
{
  "ts": 1702723200,
  "seq": 123,
  "v_raw": 2045.5,
  "temp": 25.3,
  "humi": 45.2,
  "bat": 85,
  "rssi": -72,
  "net": "4G",
  "err": 0
}
```

---

## ğŸŒ ç«¯å£è¯´æ˜

| ç«¯å£      | ç”¨é€”        | å¯¹å¤–    |
| --------- | ----------- | ------- |
| 80/443    | Web è®¿é—®    | âœ…      |
| 8883      | MQTT TLS    | âœ…      |
| 1883      | MQTT        | âš ï¸ å¼€å‘ |
| 5432/6379 | æ•°æ®åº“/ç¼“å­˜ | âŒ      |

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.11, FastAPI
- **å‰ç«¯**: Vue 3, TypeScript, ECharts
- **æ•°æ®åº“**: TimescaleDB, Redis
- **æ¶ˆæ¯**: Mosquitto MQTT
- **å®¹å™¨**: Docker

---

## ğŸ“„ è®¸å¯è¯

MIT License
